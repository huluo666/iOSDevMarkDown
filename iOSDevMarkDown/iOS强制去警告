---
title: iOS强制去警告
date: 2016-02-24 12:13:41
---
项目中存在很多黄色感叹号时，首先视觉上就觉得不舒服，并且有些警告可能产生Bug。当有些警告不想看到黄色感叹号时，可以采取一些特殊的手段强制消除警告！


```objectivec?linenums
#pragma clang diagnostic push
#pragma clang diagnostic ignored "警告名称"
//被夹在这中间的代码针对于此警告都会无视并且不显示出来
#pragma clang diagnostic pop
```

**这段代码的基本流程:**
 1. push 当前警告入栈
 2. 忽略我们要消除的警告
 3. 执行会产生警告的代码
 4. pop 警告出栈——恢复之前的状态


例如：
```objectivec?linenums
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wdeprecated-declarations"
    return [@"contentText" sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:CGSizeMake(320, CGFLOAT_MAX) lineBreakMode:0];
#pragma clang diagnostic pop
```


**常见编译警告类型**
```html?linenums
-Wincompatible-pointer-types    指针类型不匹配
-Wincomplete-implementation     没有实现已声明的方法
-Wprotocol                      没有实现协议的方法
-Wimplicit-function-declaration 尚未声明的函数(通常指c函数)
-Warc-performSelector-leaks     使用performSelector可能会出现泄漏(该警告在xcode4.3.1中没出现过,网上流传说4.2使用performselector:withObject: 就会得到该警告)
-Wdeprecated-declarations       使用了不推荐使用的方法(如[UILabel setFont:(UIFont*)])
-Wunused-variable               含有没有被使用的变量
```

**去警告宏定义**
```obj
\#define SuppressPerformSelectorLeakWarning(Stuff)
do { \
    _Pragma("clang diagnostic push") \
    _Pragma("clang diagnostic ignored \"-Warc-performSelector-leaks\"")
    Stuff; \
    _Pragma("clang diagnostic pop") \
} while (0)
```

**阅读更多**
警告类型大全：http://fuckingclangwarnings.com/